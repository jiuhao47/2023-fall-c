# Gobang Bridge软件使用说明

###  一、界面介绍

![Image-1](E:\VSCODE\UbuntuShare\C\Gobang\Doc\Pic\Image-1.png)

- 顶端

  - `Home`：首页
  - `Black IO`：黑色方程序文件的输入输出
  - `White IO`：白色方程序文件的输入输出

- 界面

  - `Move Record`：移动过程记录

  - `棋盘`：四周为坐标，中间为棋盘，存在人类玩家的情况下，鼠标点击可以为该方落子。

  - `Control Panel`：

    - `禁手规则`：包含无禁手（齐洪钢班），武成岗班，杨力祥班的禁手规则

    - `State`：显示当前对局状态，获胜(退出)原因。

    - `Info`：显示当前黑白方状态，包含人和机器两种模式，选择机器人对局点击`Choose File`选择编译好的C程序文件；选择人类玩家则点击`Switch Manual`，默认为人类玩家。人类玩家有直接鼠标点击落子和输入坐标落子两种方式，下为坐标输入格式：

      ```
      1,2
      ```

      即表示在第一行第二列落子。

    - `重新开始`：在当前玩家选取的情况下重新开始对局。

    - `导出棋谱`：生成本局比赛到目前为止的状态信息，包含禁手规则`forbidden`，对局情况`wincode`，黑方玩家`black`，白方玩家`white`，落子情况`movelog`。（关于日志导出的具体说明见后）

### 二、如何使用

1. 下载`Gobang_Bridge.exe`。
2. 双击打开。
3. 设定**禁手规则**，**黑方玩家**和**白方玩家**。
4. 进行对局。
5. （选做）重新开始。
6. （选做）导出棋谱。
7. （选做）查看`IO`。


### 三、输入输出规范

此程序对黑方白方的程序输入输出作了如下规范：

1. 启动检测：

   在输入黑方白方的函数（如用于输入黑方白方的`scanf`函数前)，前的两条语句应该为：

   ```C 
   printf("READY"\n);
   fflush(stdout);
   ```

   程序片段示例

   ```C
   printf("READY"\n);
   fflush(stdout);
   //必须紧跟着输入函数
   scanf("%s",player);
   //黑方：BLACK；白方：WHITE
   fflush(stdout);
   ```

2. 输入及输出规范

   > 程序应当输出该步骤的落子，并接受对方的下一落子

   对于棋子坐标的传输，规范统一采用下列格式化字符串形式：

   ```C
   " MOVE(%d,%d)\n"
   //MOVE前有一个空格，即读入坐标的函数应写为如下格式
scanf(" MOVE(%d,%d)",&row,&col);
   //其中行为row,列为col
   ```
	对于一次交互过程：黑方机器先手，其先输出字符串

    ```
   MOVE(1,3)//表明黑方机器在坐标(1,3)处落子，输出的时候，字符串MOVE前没有空格
    ```

   通过`Gobang_Bridge.exe`程序，白方机器获取到黑方机器的输出，然后给出白方机器的落子，输出字符串

    ```
    MOVE(2,3)//表明白方机器在(2,3)处落子
    ```

   且对于输出同学们编写的C语言程序中的用于输出落子信息用的函数：

    ```C
    printf,puts等 
    ```
   
   其输出格式规定为

   ```C
   printf("MOVE(%d,%d)\n",row,col);
   //MOVE前没有空格
   //row为行，col为列
   ```

   且其下一条语句必须为

   ```c
   fflush(stdout);
   ```


   > 原理部分（省流可跳过）：`fflush(stdout)`的作用本质为清空标准输出`stdout`的缓冲区，本程序采用标准输入输出实现白方与黑方的交互，需保证每次传入的格式为`"MOVE(%d,%d)\n"`

### 四、棋谱日志介绍

- `forbidden`：禁手规则

  - 0：无禁手
  - 1：武成岗班
  - 2：杨力祥班

- `WinPlayer`：获胜方

  - `true`：黑方
  - `false`：白方

- `Wincode`：对局状态（胜利状态）

  - `Still-Playing`：仍在进行
  - `Five in a row`：五个连成一串
  - `Non-empt position`：重复落子（即落子到了已经有棋子的位置）
  - `Draw`：平局
  - `Timeout`：超时（未采用）

- `Black`&`While`：

  - `PID`：进程号
  - `CmdLine`：文件路径
  - `ExitCode`：终止码

- `Movelog`

  - `true`：黑方
  - `false`：白方
  - `rol`，`col`行与列

  